<!DOCTYPE html>
<html>
    <head>
        <title>Eng | NB</title>
        <!--style shit-->
        <link href="css/freshstyles.css" rel="stylesheet">
        <link href="css/fresherstyles.css" rel="stylesheet">
        <link rel="shortcut icon" href="/src/favicon.png">
        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- bootstrap.min.css -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
        <!-- main.css -->
        <link rel="stylesheet" href="assets/css/main.css">
        <!-- font-awesome.min.css -->
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <!-- Lato fonts -->
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet">
        
        <link rel="stylesheet" href="css/futura.css">
        <link rel="stylesheet" href="css/lulo-clean.css">
    </head>
    <body>
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-light fixed-top">
            <div class="container">
                <!--<a class="navbar-brand" href="#">-->
                <a class="navbar-brand">
                    <img src="src/copee-a2z-1_xsmall.png" alt="Header Logo">
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <!-- <a class="nav-link" href="#home">HOME</a> -->
                            <a class="nav-link" href="index.html">HOME</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">ABOUT</a>
                        </li>
                        <li class="nav-item">
                            <!-- <a class="nav-link" href="#art">ART</a> -->
                            <a class="nav-link" href="art.html">ART</a>
                        </li>
                        <li class="nav-item">
                            <!-- <a class="nav-link" href="#zeng">(Z)ENGINEERING</a> -->
                            <a class="nav-link" href="eng.html">(Z)ENGINEERING</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        
        <div class="sidenav">
            <iframe width="280" height="auto" style="margin-top: 90px; padding-left: 15px;" src="https://www.youtube.com/embed/rvvCyIzOvao" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <iframe width="280" height="auto" style="padding-left: 15px;" src="https://www.youtube.com/embed/lioO70SsfmE" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

            <center><h6 style="margin-top: 10px; color: yellow; text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;">Skills Used</h6></center>
            <div id="feat" style="flex-wrap: wrap; margin-top: 15px; text-align: center;">
                <p>&emsp;&emsp;&emsp;&ensp;</p>
                <p class="feet-keys" style="padding: 5px; text-align: center; font-size: 12px; border: none;">Python</p>
                <p class="feet-keys" style="padding: 5px; text-align: center; font-size: 12px; border: none;">CoppeliaSim</p>
            </div>
            <!-- <p class="feet-keys" style="margin-top: 15px; padding: 5px; text-align: center; font-size: 12px; border: none;">Python</p> -->
            <center>
                <h6 style="color: yellow; text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;">Additional Info</h6></center>
            <div class="grid-container" style="margin-left: 80px;">
                <a href="https://www.youtube.com/watch?v=rvvCyIzOvao&feature=youtu.be&ab_channel=NicoleBaptist"><img src="src/yth.png" width="28px" height="28px"></a>
                <a href="https://www.youtube.com/watch?v=lioO70SsfmE&feature=youtu.be&ab_channel=NicoleBaptist"><img src="src/yth.png" width="28px" height="28px"></a>
            </div>
                <!-- <a href="https://www.linkedin.com/in/nicole-baptist-105a43175/"><img src="src/inh.png" width="28px" height="28px"></a> -->
                <!-- <a href="https://www.youtube.com/channel/UCZkRKwl5dwA0-_EWymjMdJQ"><img src="src/yth.png" width="28px" height="28px"></a> -->
                <!-- <a href="https://www.instagram.com/nicolpickl/" class="ig"></a> -->
                <!-- <a href="https://www.instagram.com/nicolpickl/"><img src="src/igh.png" width="28px" height="28px"></a> -->
        </div>

        <div class="main">
            <br>
            <hr>
            <br>
            <br>
            <h5><center>eng/Da SIMS (feat. KUKA youBot)</center></h5>
            <small><center><code>*Patrick Star voice* </code> iBot, youBot, he-she- weBot</center></small>
            <p><br></p>
            <p></p>
            <h6>Overview:</h6>
            <p>
                The final project for <code>Robotic Manipulation</code> that utilizes Python and the ModernRobotics (mr) library to manipulate a Kuka YouBot (simulated in CoppeliaSim) that picks up a block from one location and places it in another.
                <br>
                <br>
                This simulation was repeated three times, each with a different combination of initial conditions and controllers.
                <br>
                More information on the project requirements and the KUKA youBot can be found <a href="http://hades.mech.northwestern.edu/index.php/Mobile_Manipulation_Capstone" target="_blank" style="margin: auto;">here</a>.
            </p>
            <hr>
            <center><img src="src/kukabro.png" width="400px" height="auto"></center>
            <center><small>Visual of simulation environment</small></center>
            <h6><br>Components:</h6>
            <p>
                The deliverables of this project are as follows:<br>
                <br>
                &emsp; * README file (.md/pdf) to summarize findings (<a href="src/youREADME.pdf" target="_blank" style="margin: auto;">view</a>)<br>
                &emsp; * CODE directory containing the following:<br>
                &emsp;&emsp;&emsp; 1. TrajectoryGenerator.py<br>
                &emsp;&emsp;&emsp; 2. NextState.py<br>
                &emsp;&emsp;&emsp; 3. FeedbackControl.py<br>
                &emsp;&emsp;&emsp; 4. Mane.py*<br>
                &emsp; * RESULTS directory** containing the following:<br>
                &emsp;&emsp;&emsp; 1. A brief background info README file noting the controller's type and feedback gains<br>
                &emsp;&emsp;&emsp; 2. The robot data .csv file used to run the simulation<br>
                &emsp;&emsp;&emsp; 3. A video of the simulation in action<br>
                &emsp;&emsp;&emsp; 4. The corresponding X_err .csv file<br>
                &emsp;&emsp;&emsp; 5. A plot of the X_err output over time (all 6 elements)<br>
                &emsp;&emsp;&emsp; 6. A log file showing the program being called with the input*<br>
                <br>
                **The results are organized as BEST, OVERSHOOT, and NEW_TASK<br>
                <br>
                *The above deliverables can be achieved by running the Mane.py script in a code editor (such as VSCode by clicking the green run button in the top right corner).<br>
                <br>
                The above mentioned Python files require the following libraries:<br>
                <br>
                &emsp; * modern_robotics<br>
                &emsp; * numpy<br>
                &emsp; * logging<br>
                &emsp; * matplotlib<br>
                &emsp; * mrcapstone (custom made library containing the 3 milestone functions)<br>
                <small><br>&emsp;&emsp;Please ensure that these libraries are installed before running Mane.py.</small><br>
                <br>
                <small>Ps: I can (mostly) spell don't worry</small>
            </p>
            <hr>
            <h6>Instructions:</h6>
            <p>
                This code can be run in any code editor. All variables required are built into the code and can be edited within the .py files.<br>
                <br>
                Individual calls for each function can also be found in the respective function's docstring.<br>
                <small>Please remember to import the function before calling it!</small>
            </p>
            <hr>
            <h6>Background:</h6>
            <p>
                <i>TrajectoryGenerator.py:</i><br>
                The CartesianTrajectory functinon from modern_robotics was used to calculate the reference trajectory for end-effector frame {e} consisting of 8 concatenated trajectory segments which all begin and end at rest. It computes a trajectory as a list of N SE(3) matrices and then saves the eight-segment reference trajectory as a csv file.<br>
                <center><small>T_se: r11, r12, r13, r21, r22 ,r23, r31, r32, r33, px, py, pz, gripper (0pen or c1osed)</small><br></center>
                <br>
                An example call: <code>TrajectoryGenerator(T_sei, T_sci, T_scf, T_ceg, T_ces, k)</code><br>
                <br>
                Where its inputs are:<br>
                &emsp; * end-effector initial config (T_sei)<br>
                &emsp; * cube's initial config (T_sci)<br>
                &emsp; * cube's desired configuration (T_scf)<br>
                &emsp; * end-effector's config relative to cube @ grasp (T_ceg)<br>
                &emsp; * end-effector's standoff config @ not-grasp (T_ces)<br>
                &emsp; * number of trajectory reference configs per 0.01 sec (k)<br>
                &emsp;&emsp;<small>k = int >= 1</small><br>
                <br>
                and its outputs are:<br>
                &emsp; * representation of N end-effector configs (each representing T_se)<br>
                &emsp; * csv file of eight-segment reference trajectory<br>
                <br>
                and the frames used are:<br>
                &emsp; * {e}: end effector<br>
                &emsp; * {c}: cube<br>
                &emsp; * {s}: space<br>
                <br>
                This script can be tested independently with <a href="http://hades.mech.northwestern.edu/index.php/CoppeliaSim_Introduction#Scene_8:_CSV_youBot_End-Effector_Animation" target="_blank" style="margin: auto;">CoppeliaSim scene 8</a>.
            </p>
            <center><p>--------</p></center>
            <p>
                <i>NextState.py:</i><br>
                This script computes the new configurations of the arms and wheels and outputs the results as a csv file based on a simple
                first-order Euler-step.<br>
                &emsp; * F = Hcross(0) = pseudo-inverse of H(0)<br>
                &emsp; * new = old + (speeds * Δt) ≤--because of Euler step<br>
                <br>
                An example call: <code>NextState(config, speeds, t_step, w_max)</code><br>
                <br>
                Where its inputs are:<br>
                &emsp; * config - 12-vector representing the current configuration of the robot<br>
                &emsp;&emsp;<small>3 @ chassis, 5 @ arm, 4 @ wheel angles (q)</small><br>
                &emsp; * speeds - 9-vector of controls indicating arm joint speeds (dθ, 5) and wheel speeds (u, 4)<br>
                &emsp; * t_step - timestep (Δt)<br>
                &emsp; * w_max  - maximum angular speed of the arm joints and the wheels (+ω ∈ R)<br>
                <br>
                and its outputs are:<br>
                &emsp; * q_new  - 12-vector representing the configuration of the robot time Δt later<br>
                &emsp;&emsp;<small>(updated version of config with its correspoinding csv file)</small><br>
                <br>
                <small>Note: dimensions were found <a href="http://hades.mech.northwestern.edu/index.php/Mobile_Manipulation_Capstone" target="_blank" style="margin: auto;">here</a></small>
            </p>
            <center><p>--------</p></center>
            <p>
                <i>FeedbackControl.py:</i><br>
                Uses modern_robotics functions such as JacobianBody and Adjoint to calculate the commanded twist, speeds, and x_err of the simulation (and-- you guessed it-- outputs the result as a csv file). It calculates the kinematic task-space feedforward + feedback control law
                based on the following equations:<br>
                <center><code>dθ_e(t) + (1/t)*θ_e(t) = 0                                          (11.16)</code><br></center>
                <center><code>V(t) = [Ad_((X^−1)*X_d)]*V_d(t) + K_p*X_err(t) + Ki*∫X_err(t)dt     (13.37)</code><br></center>
                <br>
                An example call: <code>FeedbackControl(qq, xd, xn, kp, ki, dt)</code><br>
                <br>
                Where its inputs are:<br>
                &emsp; * qq - robot configuration (for T_se)<br>
                &emsp; * xd - current end-effector reference configuration (T_se,d)<br>
                &emsp; * xn - next end-effector reference configuration at time Δt later (T_se,d,next)<br>
                &emsp; * kp - proportional gain matrix for PI control (K_p)<br>
                &emsp; * ki - integral gain matrix for PI control (K_i)<br>
                &emsp; * dt - timestep between reference trajectory configurations (Δt)<br>
                &emsp; * qq - chassis configuration<br>
                <br>
                and its outputs are:<br>
                &emsp; * v  - commanded end-effector twist expressed in the end-effector frame {e}<br>
                &emsp; * vel- output speeds(u, d0)<br>
                &emsp; * xe - error output<br>
            </p>
            <center><p>--------</p></center>
            <p>
                <i>Mane.py:</i><br>
                Throws all the functions together. It also logs, saves csvs, and plots x_err data.
            </p>
            <hr>
            <h6>Results:</h6>
            <p>
                The best controller is the best, as it should be. It was chosen because it has no overshoot or oscillation. Although it is not particularly fast (as seen in the error plot), for this application, this slower, more robust controller is better than one that is fast with a lot of oscillation and overshoot.<br>
                <center><img src="src/best.png" width="400px" height="auto"></center>
                <center><small>Transient response for best controller (used for best and newTask)</small></center>
                <br>
                The overshoot controller, as seen in the figure below, has a lot of overshoot. Shocker. This is because it includes a large ki (= 60), which is often not used for robotics applications for this exact reason.<br>
                <center><img src="src/overshoot.png" width="400px" height="auto"></center>
                <center><small>Transient response for overshoot controller</small></center>
            </p>

        <!-- </div>    -->
        <!-- https://stackoverflow.com/questions/446060/css-two-divs-next-to-each-other -->
        <div id="parentsm" style="background-color: black;">
            <!-- <div id="narrowsm">
                <div class="wrapper">
                    <h3>Contact</h3>
                    <form action="mailto:nckmlb@gmail.com" method="post" enctype="text/plain">
                        <p class="box">
                            <input id="name" type="text" name="name" required="required">
                            <label for="name">Name</label>
                        </p>
                        <p class="box">
                            <input id="email" type="email" name="emil" required="required">
                            <label for="email">Email</label>
                        </p>
                        <p class="box">
                            <textarea id="message" name="message" required="required"></textarea>
                            <label for="message">Message</label>
                        </p>
                        <input type="submit" class="btn default" value="S U B M I T">
                    </form>
                </div>
                
            </div> -->
            <div id="widesm" class="flex-container" style="margin-left: 300px;">
                <div class="flex-item-left"> </div>
                <div class="flex-item-bottom">
                    <center><img src="src/sm_contact.png" width="95%" height="auto" class="va"></center>
                    <center>
                        <a href="https://www.linkedin.com/in/nicole-baptist-105a43175/"><img src="src/in.png" width="28px" height="28px"></a>
                        <a href="https://www.youtube.com/channel/UCZkRKwl5dwA0-_EWymjMdJQ"><img src="src/yt.png" width="28px" height="28px"></a>
                        <!-- <a href="https://www.instagram.com/nicolpickl/" class="ig"></a> -->
                        <a href="https://www.instagram.com/nicolpickl/"><img src="src/ig.png" width="28px" height="28px"></a>
                        <a href="https://github.com/nbaptist16"><img src="src/gh.png" width="28px" height="28px"></a>
                    </center>
                    <center>
                        <small></small>
                        <p style="color: white;">© 2020 by yours truly.</p>
                        <p style="color: white;">Brought to you fresh via BaptistBot.</p>
                    </center>
                </div>
                <div class="flex-item-right"> </div>
            </div>
        </div>
    </body>
    
</html>
